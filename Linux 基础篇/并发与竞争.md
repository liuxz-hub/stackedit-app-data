# 一、并发
## 1、并发原因

&emsp;&emsp;Linux 系统是个多任务操作系统，会存在多个任务同时访问同一片内存区域，这些任务可  
能会相互覆盖这段内存中的数据，造成内存数据混乱。针对这个问题必须要做处理，严重的话  
可能会导致系统崩溃。现在的 Linux 系统并发产生的原因很复杂，总结一下有下面几个主要原  
因：  
&emsp;&emsp;①、多线程并发访问， Linux 是多任务(线程)的系统，所以多线程访问是最基本的原因。  
&emsp;&emsp;②、抢占式并发访问，从 2.6 版本内核开始， Linux 内核支持抢占，也就是说调度程序可以  
在任意时刻抢占正在运行的线程，从而运行其他的线程。  
&emsp;&emsp;③、中断程序并发访问，这个无需多说，学过 STM32 的同学应该知道，硬件中断的权利可  
是很大的。  
&emsp;&emsp;④、 SMP(多核)核间并发访问，现在 ARM 架构的多核 SOC 很常见，多核 CPU 存在核间并  
发访问。

&emsp;&emsp;要保护哪些数据？因为驱动程序各不相同，那么数据也千变万化，一般像全局变量，设备结构体这些肯定是要保护的，至于其他的数据就要根据实际的驱动程序而定了。

## 2、原子操作


<!--stackedit_data:
eyJoaXN0b3J5IjpbLTQ1NjE3MDk0OV19
-->