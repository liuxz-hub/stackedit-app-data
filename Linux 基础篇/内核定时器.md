# 一、Linux 内核定时器原理
## 1、内核时间管理
&emsp;&emsp;1、`Cortec-M`内核使用` Systick` 作为系统定时器。

&emsp;&emsp;2、定时器：硬件定时器、软件定时器。

①、硬件定时器提供时钟源，时钟源的频率可以设置， 设置好以后就周期性的产生定时中断，系统使用定时中断来计时；

②、软件定时器依靠系统定时器来驱动。

&emsp;&emsp;3、linux 内核频率可以设置，图形化界面配置。

&emsp;&emsp;4、`HZ` 表示系统节拍率。

## 2、全局变量 `jiffies`
&emsp;&emsp;Linux 内核使用全局变量 `jiffies` 来记录系统从启动以来的系统节拍数，系统启动的时候会将 `jiffies` 初始化为 0。

&emsp;&emsp;`HZ` 表示每秒的节拍数， `jiffies` 表示系统运行的 `jiffies` 节拍数，所以 `jiffies/HZ` 就是系统运行时间，单位为秒。不管是 32 位还是 64 位的 `jiffies`，都有溢出的风险，溢出以后会重新从 0 开始计数，相当于绕回来了，因此有些资料也将这个现象也叫做`绕回`。假如 HZ 为最大值 1000 的时候， 32 位的 jiffies 只需要 49.7 天就发生了绕回，处理 32 位 jiffies 的绕回显得尤为重要。
<!--stackedit_data:
eyJoaXN0b3J5IjpbNDMwMzQwODA3LDE4OTE0ODU2OF19
-->