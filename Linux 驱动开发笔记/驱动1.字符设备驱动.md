# 一、字符设备驱动框架
字符设备驱动的编写主要就是驱动对应的open、cose、read · · · ，其实就是file_operations 结构体的成员变量的实现。

# 二、驱动模块的加载与卸载
Linux 驱动程序可以编译到 kernel 里面，也就是 zlmage，也可以编译为模块即 .ko 文件。测试的时候只需要加载 .ko 模块就可以，避免了重复烧录。

1、编译驱动的时候需要用到 linux 内核源码！因此要解压缩 linux,内核源码。编译 linux 内核源码。得到 zlmage 和 dtb 文件。需要使用编译后的到的 zlmage 和 dtb 启动系统；

2、从 SD 卡启动，SD 卡烧写了uboot，uboot 通过 tftp 从 ubuntu 里面获取 zlmage 和 dtb 文件。rootfs 根文件系统也是通过 nís 挂载；

3、设置 bootcmd 和 bootargs bootargs=console=ttymxc0,115200nfsroot=192.168.1.66:home/zzk/linux/nfs/rootfsip=192.168.1.50:192.168,1.66:192168.1.1:255.255.255.0:eth0:off.
root=/dew/nfs
nV
bootcmd=tftp 80800000 zlmage:tftp 83000000 imx6ull-alientek-emmc.dtb;bootz 8080000083000000;





# 三、字符设备的注册与注销



# 四、file_operations 的具体实现
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTExNzY1ODIyMzUsLTEzNDc0NjE1MjAsLT
IwODg3NDY2MTJdfQ==
-->